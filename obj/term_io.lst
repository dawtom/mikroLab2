   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 2
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"term_io.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.xatoi,"ax",%progbits
  20              		.align	2
  21              		.global	xatoi
  22              		.thumb
  23              		.thumb_func
  25              	xatoi:
  26              	.LFB0:
  27              		.file 1 "drivers/term_io.c"
   1:drivers/term_io.c **** // Basic code from ChaN, minor modifications by Martin Thomas
   2:drivers/term_io.c **** // 2011 minor tuning by RABW
   3:drivers/term_io.c **** 
   4:drivers/term_io.c **** #include <stdarg.h>
   5:drivers/term_io.c **** #include "term_io.h"
   6:drivers/term_io.c **** 
   7:drivers/term_io.c **** int xatoi (char **str, long *res)
   8:drivers/term_io.c **** {
  28              		.loc 1 8 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 70B4     		push	{r4, r5, r6}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 12
  37              		.cfi_offset 4, -12
  38              		.cfi_offset 5, -8
  39              		.cfi_offset 6, -4
   9:drivers/term_io.c **** 	uint32_t val;
  10:drivers/term_io.c **** 	uint8_t c, radix, s = 0;
  11:drivers/term_io.c **** 
  12:drivers/term_io.c **** 
  13:drivers/term_io.c **** 	while ((c = **str) == ' ') (*str)++;
  40              		.loc 1 13 0
  41 0002 0268     		ldr	r2, [r0]
  42 0004 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
  43              	.LVL1:
  44 0006 202B     		cmp	r3, #32
  45 0008 04D1     		bne	.L2
  46              	.L3:
  47              	.LVL2:
  48              		.loc 1 13 0 is_stmt 0 discriminator 2
  49 000a 0132     		adds	r2, r2, #1
  50 000c 0260     		str	r2, [r0]
  51 000e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
  52              	.LVL3:
  53 0010 202B     		cmp	r3, #32
  54 0012 FAD0     		beq	.L3
  55              	.L2:
  14:drivers/term_io.c **** 	if (c == '-') {
  56              		.loc 1 14 0 is_stmt 1
  57 0014 2D2B     		cmp	r3, #45
  58 0016 34D0     		beq	.L27
  10:drivers/term_io.c **** 
  59              		.loc 1 10 0
  60 0018 0026     		movs	r6, #0
  61              	.LVL4:
  62              	.L4:
  15:drivers/term_io.c **** 		s = 1;
  16:drivers/term_io.c **** 		c = *(++(*str));
  17:drivers/term_io.c **** 	}
  18:drivers/term_io.c **** 	if (c == '0') {
  63              		.loc 1 18 0
  64 001a 302B     		cmp	r3, #48
  65 001c 21D0     		beq	.L28
  19:drivers/term_io.c **** 		c = *(++(*str));
  20:drivers/term_io.c **** 		if (c <= ' ') {
  21:drivers/term_io.c **** 			*res = 0; return 1;
  22:drivers/term_io.c **** 		}
  23:drivers/term_io.c **** 		if (c == 'x') {
  24:drivers/term_io.c **** 			radix = 16;
  25:drivers/term_io.c **** 			c = *(++(*str));
  26:drivers/term_io.c **** 		} else {
  27:drivers/term_io.c **** 			if (c == 'b') {
  28:drivers/term_io.c **** 				radix = 2;
  29:drivers/term_io.c **** 				c = *(++(*str));
  30:drivers/term_io.c **** 			} else {
  31:drivers/term_io.c **** 				if ((c >= '0')&&(c <= '9'))
  32:drivers/term_io.c **** 					radix = 8;
  33:drivers/term_io.c **** 				else
  34:drivers/term_io.c **** 					return 0;
  35:drivers/term_io.c **** 			}
  36:drivers/term_io.c **** 		}
  37:drivers/term_io.c **** 	} else {
  38:drivers/term_io.c **** 		if ((c < '1')||(c > '9'))
  66              		.loc 1 38 0
  67 001e A3F13102 		sub	r2, r3, #49
  68 0022 082A     		cmp	r2, #8
  69 0024 1AD8     		bhi	.L12
  39:drivers/term_io.c **** 			return 0;
  40:drivers/term_io.c **** 		radix = 10;
  70              		.loc 1 40 0
  71 0026 0A25     		movs	r5, #10
  72              	.L11:
  73              	.LVL5:
  32:drivers/term_io.c **** 				else
  74              		.loc 1 32 0
  75 0028 0024     		movs	r4, #0
  76 002a 05E0     		b	.L17
  77              	.LVL6:
  78              	.L29:
  41:drivers/term_io.c **** 	}
  42:drivers/term_io.c **** 	val = 0;
  43:drivers/term_io.c **** 	while (c > ' ') {
  44:drivers/term_io.c **** 		if (c >= 'a') c -= 0x20;
  45:drivers/term_io.c **** 		c -= '0';
  46:drivers/term_io.c **** 		if (c >= 17) {
  47:drivers/term_io.c **** 			c -= 7;
  48:drivers/term_io.c **** 			if (c <= 9) return 0;
  49:drivers/term_io.c **** 		}
  50:drivers/term_io.c **** 		if (c >= radix) return 0;
  51:drivers/term_io.c **** 		val = val * radix + c;
  52:drivers/term_io.c **** 		c = *(++(*str));
  79              		.loc 1 52 0
  80 002c 0368     		ldr	r3, [r0]
  81 002e 5A1C     		adds	r2, r3, #1
  82              	.LVL7:
  83 0030 0260     		str	r2, [r0]
  84 0032 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
  85              	.LVL8:
  43:drivers/term_io.c **** 		if (c >= 'a') c -= 0x20;
  86              		.loc 1 43 0
  87 0034 202B     		cmp	r3, #32
  88 0036 30D9     		bls	.L14
  89              	.LVL9:
  90              	.L17:
  44:drivers/term_io.c **** 		c -= '0';
  91              		.loc 1 44 0
  92 0038 602B     		cmp	r3, #96
  93 003a 84BF     		itt	hi
  94 003c 203B     		subhi	r3, r3, #32
  95              	.LVL10:
  96 003e DBB2     		uxtbhi	r3, r3
  97              	.LVL11:
  45:drivers/term_io.c **** 		if (c >= 17) {
  98              		.loc 1 45 0
  99 0040 A3F13002 		sub	r2, r3, #48
 100 0044 D2B2     		uxtb	r2, r2
 101              	.LVL12:
  46:drivers/term_io.c **** 			c -= 7;
 102              		.loc 1 46 0
 103 0046 102A     		cmp	r2, #16
  47:drivers/term_io.c **** 			if (c <= 9) return 0;
 104              		.loc 1 47 0
 105 0048 A3F13703 		sub	r3, r3, #55
  46:drivers/term_io.c **** 			c -= 7;
 106              		.loc 1 46 0
 107 004c 02D9     		bls	.L16
  47:drivers/term_io.c **** 			if (c <= 9) return 0;
 108              		.loc 1 47 0
 109 004e DAB2     		uxtb	r2, r3
 110              	.LVL13:
  48:drivers/term_io.c **** 		}
 111              		.loc 1 48 0
 112 0050 092A     		cmp	r2, #9
 113 0052 03D9     		bls	.L12
 114              	.L16:
  50:drivers/term_io.c **** 		val = val * radix + c;
 115              		.loc 1 50 0
 116 0054 AA42     		cmp	r2, r5
  51:drivers/term_io.c **** 		c = *(++(*str));
 117              		.loc 1 51 0
 118 0056 05FB0424 		mla	r4, r5, r4, r2
 119              	.LVL14:
  50:drivers/term_io.c **** 		val = val * radix + c;
 120              		.loc 1 50 0
 121 005a E7D3     		bcc	.L29
 122              	.LVL15:
 123              	.L12:
  34:drivers/term_io.c **** 			}
 124              		.loc 1 34 0
 125 005c 0020     		movs	r0, #0
 126              	.LVL16:
  53:drivers/term_io.c **** 	}
  54:drivers/term_io.c **** 	if (s) val = -val;
  55:drivers/term_io.c **** 	*res = val;
  56:drivers/term_io.c **** 	return 1;
  57:drivers/term_io.c **** }
 127              		.loc 1 57 0
 128 005e 70BC     		pop	{r4, r5, r6}
 129              	.LCFI1:
 130              		.cfi_remember_state
 131              		.cfi_restore 6
 132              		.cfi_restore 5
 133              		.cfi_restore 4
 134              		.cfi_def_cfa_offset 0
 135              	.LVL17:
 136 0060 7047     		bx	lr
 137              	.LVL18:
 138              	.L28:
 139              	.LCFI2:
 140              		.cfi_restore_state
  19:drivers/term_io.c **** 		if (c <= ' ') {
 141              		.loc 1 19 0
 142 0062 0268     		ldr	r2, [r0]
 143 0064 531C     		adds	r3, r2, #1
 144              	.LVL19:
 145 0066 0360     		str	r3, [r0]
 146 0068 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 147              	.LVL20:
  20:drivers/term_io.c **** 			*res = 0; return 1;
 148              		.loc 1 20 0
 149 006a 202B     		cmp	r3, #32
 150 006c 1CD9     		bls	.L30
  23:drivers/term_io.c **** 			radix = 16;
 151              		.loc 1 23 0
 152 006e 782B     		cmp	r3, #120
 153 0070 0CD0     		beq	.L31
  27:drivers/term_io.c **** 				radix = 2;
 154              		.loc 1 27 0
 155 0072 622B     		cmp	r3, #98
 156 0074 1DD0     		beq	.L32
  31:drivers/term_io.c **** 					radix = 8;
 157              		.loc 1 31 0
 158 0076 A3F13002 		sub	r2, r3, #48
 159 007a 092A     		cmp	r2, #9
 160 007c EED8     		bhi	.L12
  32:drivers/term_io.c **** 				else
 161              		.loc 1 32 0
 162 007e 0825     		movs	r5, #8
 163 0080 D2E7     		b	.L11
 164              	.LVL21:
 165              	.L27:
  16:drivers/term_io.c **** 	}
 166              		.loc 1 16 0
 167 0082 531C     		adds	r3, r2, #1
 168              	.LVL22:
 169 0084 0360     		str	r3, [r0]
 170 0086 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 171              	.LVL23:
  15:drivers/term_io.c **** 		c = *(++(*str));
 172              		.loc 1 15 0
 173 0088 0126     		movs	r6, #1
 174 008a C6E7     		b	.L4
 175              	.LVL24:
 176              	.L31:
  25:drivers/term_io.c **** 		} else {
 177              		.loc 1 25 0
 178 008c 931C     		adds	r3, r2, #2
 179              	.LVL25:
 180 008e 0360     		str	r3, [r0]
 181              	.LVL26:
 182 0090 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 183              	.LVL27:
  24:drivers/term_io.c **** 			c = *(++(*str));
 184              		.loc 1 24 0
 185 0092 1025     		movs	r5, #16
 186              	.LVL28:
 187              	.L9:
  43:drivers/term_io.c **** 		if (c >= 'a') c -= 0x20;
 188              		.loc 1 43 0
 189 0094 202B     		cmp	r3, #32
 190 0096 C7D8     		bhi	.L11
  42:drivers/term_io.c **** 	while (c > ' ') {
 191              		.loc 1 42 0
 192 0098 0024     		movs	r4, #0
 193              	.LVL29:
 194              	.L14:
 195 009a 7342     		negs	r3, r6
 196              	.LVL30:
 197 009c 5C40     		eors	r4, r4, r3
 198              	.LVL31:
 199 009e 2644     		add	r6, r6, r4
 200              	.LVL32:
  55:drivers/term_io.c **** 	return 1;
 201              		.loc 1 55 0
 202 00a0 0E60     		str	r6, [r1]
  56:drivers/term_io.c **** }
 203              		.loc 1 56 0
 204 00a2 0120     		movs	r0, #1
 205              	.LVL33:
 206              		.loc 1 57 0
 207 00a4 70BC     		pop	{r4, r5, r6}
 208              	.LCFI3:
 209              		.cfi_remember_state
 210              		.cfi_restore 4
 211              		.cfi_restore 5
 212              		.cfi_restore 6
 213              		.cfi_def_cfa_offset 0
 214              	.LVL34:
 215 00a6 7047     		bx	lr
 216              	.LVL35:
 217              	.L30:
 218              	.LCFI4:
 219              		.cfi_restore_state
  21:drivers/term_io.c **** 		}
 220              		.loc 1 21 0
 221 00a8 0023     		movs	r3, #0
 222              	.LVL36:
 223 00aa 0120     		movs	r0, #1
 224              	.LVL37:
 225 00ac 0B60     		str	r3, [r1]
 226              	.LVL38:
 227              		.loc 1 57 0
 228 00ae 70BC     		pop	{r4, r5, r6}
 229              	.LCFI5:
 230              		.cfi_remember_state
 231              		.cfi_restore 4
 232              		.cfi_restore 5
 233              		.cfi_restore 6
 234              		.cfi_def_cfa_offset 0
 235              	.LVL39:
 236 00b0 7047     		bx	lr
 237              	.LVL40:
 238              	.L32:
 239              	.LCFI6:
 240              		.cfi_restore_state
  29:drivers/term_io.c **** 			} else {
 241              		.loc 1 29 0
 242 00b2 931C     		adds	r3, r2, #2
 243              	.LVL41:
 244 00b4 0360     		str	r3, [r0]
 245              	.LVL42:
 246 00b6 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 247              	.LVL43:
  28:drivers/term_io.c **** 				c = *(++(*str));
 248              		.loc 1 28 0
 249 00b8 0225     		movs	r5, #2
 250 00ba EBE7     		b	.L9
 251              		.cfi_endproc
 252              	.LFE0:
 254              		.section	.text.xputc,"ax",%progbits
 255              		.align	2
 256              		.global	xputc
 257              		.thumb
 258              		.thumb_func
 260              	xputc:
 261              	.LFB1:
  58:drivers/term_io.c **** 
  59:drivers/term_io.c **** 
  60:drivers/term_io.c **** 
  61:drivers/term_io.c **** 
  62:drivers/term_io.c **** void xputc (char c)
  63:drivers/term_io.c **** {
 262              		.loc 1 63 0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
 266              	.LVL44:
  64:drivers/term_io.c **** 	if (c == '\n') debug_chr('\r');
 267              		.loc 1 64 0
 268 0000 0A28     		cmp	r0, #10
  63:drivers/term_io.c **** 	if (c == '\n') debug_chr('\r');
 269              		.loc 1 63 0
 270 0002 10B5     		push	{r4, lr}
 271              	.LCFI7:
 272              		.cfi_def_cfa_offset 8
 273              		.cfi_offset 4, -8
 274              		.cfi_offset 14, -4
  63:drivers/term_io.c **** 	if (c == '\n') debug_chr('\r');
 275              		.loc 1 63 0
 276 0004 0446     		mov	r4, r0
 277              		.loc 1 64 0
 278 0006 04D0     		beq	.L36
  65:drivers/term_io.c **** 	debug_chr(c);
 279              		.loc 1 65 0
 280 0008 2046     		mov	r0, r4
 281              	.LVL45:
  66:drivers/term_io.c **** }
 282              		.loc 1 66 0
 283 000a BDE81040 		pop	{r4, lr}
 284              	.LCFI8:
 285              		.cfi_remember_state
 286              		.cfi_restore 14
 287              		.cfi_restore 4
 288              		.cfi_def_cfa_offset 0
  65:drivers/term_io.c **** 	debug_chr(c);
 289              		.loc 1 65 0
 290 000e FFF7FEBF 		b	debug_chr
 291              	.LVL46:
 292              	.L36:
 293              	.LCFI9:
 294              		.cfi_restore_state
  64:drivers/term_io.c **** 	debug_chr(c);
 295              		.loc 1 64 0 discriminator 1
 296 0012 0D20     		movs	r0, #13
 297              	.LVL47:
 298 0014 FFF7FEFF 		bl	debug_chr
 299              	.LVL48:
  65:drivers/term_io.c **** 	debug_chr(c);
 300              		.loc 1 65 0 discriminator 1
 301 0018 2046     		mov	r0, r4
 302              		.loc 1 66 0 discriminator 1
 303 001a BDE81040 		pop	{r4, lr}
 304              	.LCFI10:
 305              		.cfi_restore 4
 306              		.cfi_restore 14
 307              		.cfi_def_cfa_offset 0
  65:drivers/term_io.c **** 	debug_chr(c);
 308              		.loc 1 65 0 discriminator 1
 309 001e FFF7FEBF 		b	debug_chr
 310              	.LVL49:
 311              		.cfi_endproc
 312              	.LFE1:
 314 0022 00BF     		.section	.text.xputs,"ax",%progbits
 315              		.align	2
 316              		.global	xputs
 317              		.thumb
 318              		.thumb_func
 320              	xputs:
 321              	.LFB2:
  67:drivers/term_io.c **** 
  68:drivers/term_io.c **** 
  69:drivers/term_io.c **** 
  70:drivers/term_io.c **** 
  71:drivers/term_io.c **** void xputs (const char* str)
  72:drivers/term_io.c **** {
 322              		.loc 1 72 0
 323              		.cfi_startproc
 324              		@ args = 0, pretend = 0, frame = 0
 325              		@ frame_needed = 0, uses_anonymous_args = 0
 326              	.LVL50:
 327 0000 10B5     		push	{r4, lr}
 328              	.LCFI11:
 329              		.cfi_def_cfa_offset 8
 330              		.cfi_offset 4, -8
 331              		.cfi_offset 14, -4
 332              		.loc 1 72 0
 333 0002 0446     		mov	r4, r0
  73:drivers/term_io.c **** 	while (*str)
 334              		.loc 1 73 0
 335 0004 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 336              	.LVL51:
 337 0006 28B1     		cbz	r0, .L37
 338              	.LVL52:
 339              	.L39:
  74:drivers/term_io.c **** 		xputc(*str++);
 340              		.loc 1 74 0
 341 0008 FFF7FEFF 		bl	xputc
 342              	.LVL53:
  73:drivers/term_io.c **** 	while (*str)
 343              		.loc 1 73 0
 344 000c 14F8010F 		ldrb	r0, [r4, #1]!	@ zero_extendqisi2
 345              	.LVL54:
 346 0010 0028     		cmp	r0, #0
 347 0012 F9D1     		bne	.L39
 348              	.LVL55:
 349              	.L37:
 350 0014 10BD     		pop	{r4, pc}
 351              		.cfi_endproc
 352              	.LFE2:
 354 0016 00BF     		.section	.text.xitoa,"ax",%progbits
 355              		.align	2
 356              		.global	xitoa
 357              		.thumb
 358              		.thumb_func
 360              	xitoa:
 361              	.LFB3:
  75:drivers/term_io.c **** }
  76:drivers/term_io.c **** 
  77:drivers/term_io.c **** 
  78:drivers/term_io.c **** 
  79:drivers/term_io.c **** 
  80:drivers/term_io.c **** void xitoa (long val, int radix, int len)
  81:drivers/term_io.c **** {
 362              		.loc 1 81 0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 24
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366              	.LVL56:
 367 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 368              	.LCFI12:
 369              		.cfi_def_cfa_offset 20
 370              		.cfi_offset 4, -20
 371              		.cfi_offset 5, -16
 372              		.cfi_offset 6, -12
 373              		.cfi_offset 7, -8
 374              		.cfi_offset 14, -4
  82:drivers/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
  83:drivers/term_io.c **** 	uint8_t s[20], i = 0;
  84:drivers/term_io.c **** 	uint32_t v;
  85:drivers/term_io.c **** 
  86:drivers/term_io.c **** 
  87:drivers/term_io.c **** 	if (radix < 0) {
 375              		.loc 1 87 0
 376 0002 0029     		cmp	r1, #0
  81:drivers/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
 377              		.loc 1 81 0
 378 0004 87B0     		sub	sp, sp, #28
 379              	.LCFI13:
 380              		.cfi_def_cfa_offset 48
 381              		.loc 1 87 0
 382 0006 3DDB     		blt	.L65
 383              	.L55:
  82:drivers/term_io.c **** 	uint8_t c, r, sgn = 0, pad = ' ';
 384              		.loc 1 82 0
 385 0008 0026     		movs	r6, #0
 386              	.LVL57:
 387              	.L44:
  88:drivers/term_io.c **** 		radix = -radix;
  89:drivers/term_io.c **** 		if (val < 0) {
  90:drivers/term_io.c **** 			val = -val;
  91:drivers/term_io.c **** 			sgn = '-';
  92:drivers/term_io.c **** 		}
  93:drivers/term_io.c **** 	}
  94:drivers/term_io.c **** 	v = val;
  95:drivers/term_io.c **** 	r = radix;
  96:drivers/term_io.c **** 	if (len < 0) {
 388              		.loc 1 96 0
 389 000a 002A     		cmp	r2, #0
  97:drivers/term_io.c **** 		len = -len;
 390              		.loc 1 97 0
 391 000c BABF     		itte	lt
 392 000e 5242     		rsblt	r2, r2, #0
 393              	.LVL58:
  98:drivers/term_io.c **** 		pad = '0';
 394              		.loc 1 98 0
 395 0010 3025     		movlt	r5, #48
  82:drivers/term_io.c **** 	uint8_t s[20], i = 0;
 396              		.loc 1 82 0
 397 0012 2025     		movge	r5, #32
 398              	.LVL59:
  99:drivers/term_io.c **** 	}
 100:drivers/term_io.c **** 	if (len > 20) return;
 399              		.loc 1 100 0
 400 0014 142A     		cmp	r2, #20
 401 0016 33DC     		bgt	.L43
 402 0018 C9B2     		uxtb	r1, r1
 403              	.LVL60:
  94:drivers/term_io.c **** 	r = radix;
 404              		.loc 1 94 0
 405 001a 0024     		movs	r4, #0
 406              	.LVL61:
 407              	.L48:
 101:drivers/term_io.c **** 	do {
 102:drivers/term_io.c **** 		c = (uint8_t)(v % r);
 408              		.loc 1 102 0
 409 001c B0FBF1F3 		udiv	r3, r0, r1
 410 0020 01FB1300 		mls	r0, r1, r3, r0
 411              	.LVL62:
 412 0024 C0B2     		uxtb	r0, r0
 413              	.LVL63:
 103:drivers/term_io.c **** 		if (c >= 10) c += 7;
 414              		.loc 1 103 0
 415 0026 0928     		cmp	r0, #9
 416 0028 88BF     		it	hi
 417 002a 0730     		addhi	r0, r0, #7
 418              	.LVL64:
 104:drivers/term_io.c **** 		c += '0';
 105:drivers/term_io.c **** 		s[i++] = c;
 419              		.loc 1 105 0
 420 002c 06AF     		add	r7, sp, #24
 421 002e 2744     		add	r7, r7, r4
 103:drivers/term_io.c **** 		if (c >= 10) c += 7;
 422              		.loc 1 103 0
 423 0030 88BF     		it	hi
 424 0032 C0B2     		uxtbhi	r0, r0
 425              	.LVL65:
 104:drivers/term_io.c **** 		c += '0';
 426              		.loc 1 104 0
 427 0034 3030     		adds	r0, r0, #48
 428              	.LVL66:
 429              		.loc 1 105 0
 430 0036 0134     		adds	r4, r4, #1
 431              	.LVL67:
 432 0038 07F8140C 		strb	r0, [r7, #-20]
 433 003c E4B2     		uxtb	r4, r4
 434              	.LVL68:
 106:drivers/term_io.c **** 		v /= r;
 435              		.loc 1 106 0
 436 003e 1846     		mov	r0, r3
 437              	.LVL69:
 107:drivers/term_io.c **** 	} while (v);
 438              		.loc 1 107 0
 439 0040 002B     		cmp	r3, #0
 440 0042 EBD1     		bne	.L48
 105:drivers/term_io.c **** 		v /= r;
 441              		.loc 1 105 0
 442 0044 2346     		mov	r3, r4
 108:drivers/term_io.c **** 	if (sgn) s[i++] = sgn;
 443              		.loc 1 108 0
 444 0046 76B1     		cbz	r6, .L64
 445              		.loc 1 108 0 is_stmt 0 discriminator 1
 446 0048 06A9     		add	r1, sp, #24
 447              	.LVL70:
 448 004a 0134     		adds	r4, r4, #1
 449              	.LVL71:
 450 004c 0B44     		add	r3, r3, r1
 451              	.LVL72:
 452 004e E4B2     		uxtb	r4, r4
 453              	.LVL73:
 109:drivers/term_io.c **** 	while (i < len)
 454              		.loc 1 109 0 is_stmt 1 discriminator 1
 455 0050 A242     		cmp	r2, r4
 108:drivers/term_io.c **** 	if (sgn) s[i++] = sgn;
 456              		.loc 1 108 0 discriminator 1
 457 0052 03F8146C 		strb	r6, [r3, #-20]
 458              		.loc 1 109 0 discriminator 1
 459 0056 2346     		mov	r3, r4
 460 0058 08DD     		ble	.L52
 461              	.L51:
 110:drivers/term_io.c **** 		s[i++] = pad;
 462              		.loc 1 110 0
 463 005a 06A9     		add	r1, sp, #24
 464 005c 0B44     		add	r3, r3, r1
 465 005e 0134     		adds	r4, r4, #1
 466              	.LVL74:
 467 0060 E4B2     		uxtb	r4, r4
 468              	.LVL75:
 469 0062 03F8145C 		strb	r5, [r3, #-20]
 470              	.L64:
 109:drivers/term_io.c **** 	while (i < len)
 471              		.loc 1 109 0
 472 0066 A242     		cmp	r2, r4
 473 0068 2346     		mov	r3, r4
 474 006a F6DC     		bgt	.L51
 475              	.LVL76:
 476              	.L52:
 111:drivers/term_io.c **** 	do
 112:drivers/term_io.c **** 		xputc(s[--i]);
 477              		.loc 1 112 0 discriminator 1
 478 006c 013C     		subs	r4, r4, #1
 479              	.LVL77:
 480 006e E4B2     		uxtb	r4, r4
 481              	.LVL78:
 482 0070 06AB     		add	r3, sp, #24
 483 0072 2344     		add	r3, r3, r4
 484 0074 13F8140C 		ldrb	r0, [r3, #-20]	@ zero_extendqisi2
 485 0078 FFF7FEFF 		bl	xputc
 486              	.LVL79:
 113:drivers/term_io.c **** 	while (i);
 487              		.loc 1 113 0 discriminator 1
 488 007c 002C     		cmp	r4, #0
 489 007e F5D1     		bne	.L52
 490              	.LVL80:
 491              	.L43:
 114:drivers/term_io.c **** }
 492              		.loc 1 114 0
 493 0080 07B0     		add	sp, sp, #28
 494              	.LCFI14:
 495              		.cfi_remember_state
 496              		.cfi_def_cfa_offset 20
 497              		@ sp needed
 498 0082 F0BD     		pop	{r4, r5, r6, r7, pc}
 499              	.LVL81:
 500              	.L65:
 501              	.LCFI15:
 502              		.cfi_restore_state
  89:drivers/term_io.c **** 			val = -val;
 503              		.loc 1 89 0
 504 0084 0028     		cmp	r0, #0
  88:drivers/term_io.c **** 		if (val < 0) {
 505              		.loc 1 88 0
 506 0086 C1F10001 		rsb	r1, r1, #0
 507              	.LVL82:
  89:drivers/term_io.c **** 			val = -val;
 508              		.loc 1 89 0
 509 008a BDDA     		bge	.L55
  90:drivers/term_io.c **** 			sgn = '-';
 510              		.loc 1 90 0
 511 008c 4042     		negs	r0, r0
 512              	.LVL83:
  91:drivers/term_io.c **** 		}
 513              		.loc 1 91 0
 514 008e 2D26     		movs	r6, #45
 515 0090 BBE7     		b	.L44
 516              		.cfi_endproc
 517              	.LFE3:
 519 0092 00BF     		.section	.text.xprintf,"ax",%progbits
 520              		.align	2
 521              		.global	xprintf
 522              		.thumb
 523              		.thumb_func
 525              	xprintf:
 526              	.LFB4:
 115:drivers/term_io.c **** 
 116:drivers/term_io.c **** void xprintf (const char* str, ...)
 117:drivers/term_io.c **** {
 527              		.loc 1 117 0
 528              		.cfi_startproc
 529              		@ args = 4, pretend = 16, frame = 8
 530              		@ frame_needed = 0, uses_anonymous_args = 1
 531              	.LVL84:
 532 0000 0FB4     		push	{r0, r1, r2, r3}
 533              	.LCFI16:
 534              		.cfi_def_cfa_offset 16
 535              		.cfi_offset 0, -16
 536              		.cfi_offset 1, -12
 537              		.cfi_offset 2, -8
 538              		.cfi_offset 3, -4
 539 0002 70B5     		push	{r4, r5, r6, lr}
 540              	.LCFI17:
 541              		.cfi_def_cfa_offset 32
 542              		.cfi_offset 4, -32
 543              		.cfi_offset 5, -28
 544              		.cfi_offset 6, -24
 545              		.cfi_offset 14, -20
 546 0004 82B0     		sub	sp, sp, #8
 547              	.LCFI18:
 548              		.cfi_def_cfa_offset 40
 549              		.loc 1 117 0
 550 0006 06AB     		add	r3, sp, #24
 551 0008 53F8045B 		ldr	r5, [r3], #4
 118:drivers/term_io.c **** 	va_list arp;
 119:drivers/term_io.c **** 	int d, r, w, s, l;
 120:drivers/term_io.c **** 
 121:drivers/term_io.c **** 
 122:drivers/term_io.c **** 	va_start(arp, str);
 552              		.loc 1 122 0
 553 000c 0193     		str	r3, [sp, #4]
 554              	.LVL85:
 555              	.L67:
 123:drivers/term_io.c **** 
 124:drivers/term_io.c **** 	while ((d = *str++) != 0) {
 556              		.loc 1 124 0
 557 000e 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 558              	.LVL86:
 559 0010 38B1     		cbz	r0, .L66
 560              	.LVL87:
 561              	.L83:
 125:drivers/term_io.c **** 		if (d != '%') {
 562              		.loc 1 125 0
 563 0012 2528     		cmp	r0, #37
 564 0014 0AD0     		beq	.L68
 124:drivers/term_io.c **** 		if (d != '%') {
 565              		.loc 1 124 0
 566 0016 0135     		adds	r5, r5, #1
 126:drivers/term_io.c **** 			xputc(d); continue;
 567              		.loc 1 126 0
 568 0018 FFF7FEFF 		bl	xputc
 569              	.LVL88:
 124:drivers/term_io.c **** 		if (d != '%') {
 570              		.loc 1 124 0
 571 001c 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 572              	.LVL89:
 573 001e 0028     		cmp	r0, #0
 574 0020 F7D1     		bne	.L83
 575              	.LVL90:
 576              	.L66:
 127:drivers/term_io.c **** 		}
 128:drivers/term_io.c **** 		d = *str++; w = r = s = l = 0;
 129:drivers/term_io.c **** 		if (d == '0') {
 130:drivers/term_io.c **** 			d = *str++; s = 1;
 131:drivers/term_io.c **** 		}
 132:drivers/term_io.c **** 		while ((d >= '0')&&(d <= '9')) {
 133:drivers/term_io.c **** 			w += w * 10 + (d - '0');
 134:drivers/term_io.c **** 			d = *str++;
 135:drivers/term_io.c **** 		}
 136:drivers/term_io.c **** 		if (s) w = -w;
 137:drivers/term_io.c **** 		if (d == 'l') {
 138:drivers/term_io.c **** 			l = 1;
 139:drivers/term_io.c **** 			d = *str++;
 140:drivers/term_io.c **** 		}
 141:drivers/term_io.c **** 		if (!d) break;
 142:drivers/term_io.c **** 		if (d == 's') {
 143:drivers/term_io.c **** 			xputs(va_arg(arp, char*));
 144:drivers/term_io.c **** 			continue;
 145:drivers/term_io.c **** 		}
 146:drivers/term_io.c **** 		if (d == 'c') {
 147:drivers/term_io.c **** 			xputc((char)va_arg(arp, int));
 148:drivers/term_io.c **** 			continue;
 149:drivers/term_io.c **** 		}
 150:drivers/term_io.c **** 		if (d == 'u') r = 10;
 151:drivers/term_io.c **** 		if (d == 'd') r = -10;
 152:drivers/term_io.c **** 		if (d == 'X' || d == 'x') r = 16; // 'x' added by mthomas in increase compatibility
 153:drivers/term_io.c **** 		if (d == 'b') r = 2;
 154:drivers/term_io.c **** 		if (!r) break;
 155:drivers/term_io.c **** 		if (l) {
 156:drivers/term_io.c **** 			xitoa((long)va_arg(arp, long), r, w);
 157:drivers/term_io.c **** 		} else {
 158:drivers/term_io.c **** 			if (r > 0)
 159:drivers/term_io.c **** 				xitoa((unsigned long)va_arg(arp, int), r, w);
 160:drivers/term_io.c **** 			else
 161:drivers/term_io.c **** 				xitoa((long)va_arg(arp, int), r, w);
 162:drivers/term_io.c **** 		}
 163:drivers/term_io.c **** 	}
 164:drivers/term_io.c **** 
 165:drivers/term_io.c **** 	va_end(arp);
 166:drivers/term_io.c **** }
 577              		.loc 1 166 0
 578 0022 02B0     		add	sp, sp, #8
 579              	.LCFI19:
 580              		.cfi_remember_state
 581              		.cfi_def_cfa_offset 32
 582              		@ sp needed
 583 0024 BDE87040 		pop	{r4, r5, r6, lr}
 584              	.LCFI20:
 585              		.cfi_restore 14
 586              		.cfi_restore 6
 587              		.cfi_restore 5
 588              		.cfi_restore 4
 589              		.cfi_def_cfa_offset 16
 590 0028 04B0     		add	sp, sp, #16
 591              	.LCFI21:
 592              		.cfi_restore 3
 593              		.cfi_restore 2
 594              		.cfi_restore 1
 595              		.cfi_restore 0
 596              		.cfi_def_cfa_offset 0
 597 002a 7047     		bx	lr
 598              	.LVL91:
 599              	.L68:
 600              	.LCFI22:
 601              		.cfi_restore_state
 128:drivers/term_io.c **** 		if (d == '0') {
 602              		.loc 1 128 0
 603 002c 6C78     		ldrb	r4, [r5, #1]	@ zero_extendqisi2
 604              	.LVL92:
 129:drivers/term_io.c **** 			d = *str++; s = 1;
 605              		.loc 1 129 0
 606 002e 302C     		cmp	r4, #48
 607 0030 2FD0     		beq	.L70
 128:drivers/term_io.c **** 		if (d == '0') {
 608              		.loc 1 128 0
 609 0032 0026     		movs	r6, #0
 610 0034 0235     		adds	r5, r5, #2
 611              	.LVL93:
 612 0036 3246     		mov	r2, r6
 613              	.LVL94:
 614              	.L71:
 132:drivers/term_io.c **** 			w += w * 10 + (d - '0');
 615              		.loc 1 132 0
 616 0038 A4F13000 		sub	r0, r4, #48
 617 003c 0928     		cmp	r0, #9
 618 003e 4FF00003 		mov	r3, #0
 619 0042 0AD8     		bhi	.L72
 620              	.LVL95:
 621              	.L73:
 134:drivers/term_io.c **** 		}
 622              		.loc 1 134 0
 623 0044 15F8014B 		ldrb	r4, [r5], #1	@ zero_extendqisi2
 624              	.LVL96:
 133:drivers/term_io.c **** 			d = *str++;
 625              		.loc 1 133 0
 626 0048 03EB8301 		add	r1, r3, r3, lsl #2
 627 004c 00EB4101 		add	r1, r0, r1, lsl #1
 132:drivers/term_io.c **** 			w += w * 10 + (d - '0');
 628              		.loc 1 132 0
 629 0050 A4F13000 		sub	r0, r4, #48
 630 0054 0928     		cmp	r0, #9
 133:drivers/term_io.c **** 			d = *str++;
 631              		.loc 1 133 0
 632 0056 0B44     		add	r3, r3, r1
 633              	.LVL97:
 132:drivers/term_io.c **** 			w += w * 10 + (d - '0');
 634              		.loc 1 132 0
 635 0058 F4D9     		bls	.L73
 636              	.LVL98:
 637              	.L72:
 137:drivers/term_io.c **** 			l = 1;
 638              		.loc 1 137 0
 639 005a 6C2C     		cmp	r4, #108
 640 005c 15D0     		beq	.L107
 641              	.LVL99:
 642              	.L74:
 141:drivers/term_io.c **** 		if (d == 's') {
 643              		.loc 1 141 0
 644 005e 002C     		cmp	r4, #0
 645 0060 DFD0     		beq	.L66
 142:drivers/term_io.c **** 			xputs(va_arg(arp, char*));
 646              		.loc 1 142 0
 647 0062 732C     		cmp	r4, #115
 648 0064 1BD0     		beq	.L108
 146:drivers/term_io.c **** 			xputc((char)va_arg(arp, int));
 649              		.loc 1 146 0
 650 0066 632C     		cmp	r4, #99
 651 0068 32D0     		beq	.L109
 652 006a 7340     		eors	r3, r3, r6
 653              	.LVL100:
 150:drivers/term_io.c **** 		if (d == 'd') r = -10;
 654              		.loc 1 150 0
 655 006c 752C     		cmp	r4, #117
 656 006e 1A44     		add	r2, r2, r3
 657 0070 26D0     		beq	.L79
 151:drivers/term_io.c **** 		if (d == 'X' || d == 'x') r = 16; // 'x' added by mthomas in increase compatibility
 658              		.loc 1 151 0
 659 0072 642C     		cmp	r4, #100
 660 0074 21D0     		beq	.L80
 152:drivers/term_io.c **** 		if (d == 'b') r = 2;
 661              		.loc 1 152 0
 662 0076 582C     		cmp	r4, #88
 663 0078 24D1     		bne	.L110
 664              	.L90:
 665 007a 1021     		movs	r1, #16
 666              	.LVL101:
 667              	.L101:
 161:drivers/term_io.c **** 		}
 668              		.loc 1 161 0
 669 007c 019B     		ldr	r3, [sp, #4]
 670 007e 1C1D     		adds	r4, r3, #4
 671 0080 1868     		ldr	r0, [r3]
 672 0082 0194     		str	r4, [sp, #4]
 673 0084 FFF7FEFF 		bl	xitoa
 674              	.LVL102:
 675 0088 C1E7     		b	.L67
 676              	.LVL103:
 677              	.L107:
 138:drivers/term_io.c **** 			d = *str++;
 678              		.loc 1 138 0
 679 008a 0120     		movs	r0, #1
 139:drivers/term_io.c **** 		}
 680              		.loc 1 139 0
 681 008c 2C78     		ldrb	r4, [r5]	@ zero_extendqisi2
 682              	.LVL104:
 683 008e 0544     		add	r5, r5, r0
 684              	.LVL105:
 685 0090 E5E7     		b	.L74
 686              	.LVL106:
 687              	.L70:
 130:drivers/term_io.c **** 		}
 688              		.loc 1 130 0
 689 0092 AC78     		ldrb	r4, [r5, #2]	@ zero_extendqisi2
 690              	.LVL107:
 691 0094 4FF0FF36 		mov	r6, #-1
 692 0098 0335     		adds	r5, r5, #3
 693              	.LVL108:
 694 009a 0122     		movs	r2, #1
 695 009c CCE7     		b	.L71
 696              	.LVL109:
 697              	.L108:
 143:drivers/term_io.c **** 			continue;
 698              		.loc 1 143 0
 699 009e 019B     		ldr	r3, [sp, #4]
 700              	.LVL110:
 701 00a0 1C68     		ldr	r4, [r3]
 702              	.LVL111:
 703              	.LBB4:
 704              	.LBB5:
  73:drivers/term_io.c **** 		xputc(*str++);
 705              		.loc 1 73 0
 706 00a2 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 707              	.LBE5:
 708              	.LBE4:
 143:drivers/term_io.c **** 			continue;
 709              		.loc 1 143 0
 710 00a4 0433     		adds	r3, r3, #4
 711 00a6 0193     		str	r3, [sp, #4]
 712              	.LBB7:
 713              	.LBB6:
  73:drivers/term_io.c **** 		xputc(*str++);
 714              		.loc 1 73 0
 715 00a8 0028     		cmp	r0, #0
 716 00aa B0D0     		beq	.L67
 717              	.LVL112:
 718              	.L77:
  74:drivers/term_io.c **** }
 719              		.loc 1 74 0
 720 00ac FFF7FEFF 		bl	xputc
 721              	.LVL113:
  73:drivers/term_io.c **** 		xputc(*str++);
 722              		.loc 1 73 0
 723 00b0 14F8010F 		ldrb	r0, [r4, #1]!	@ zero_extendqisi2
 724              	.LVL114:
 725 00b4 0028     		cmp	r0, #0
 726 00b6 F9D1     		bne	.L77
 727 00b8 A9E7     		b	.L67
 728              	.LVL115:
 729              	.L80:
 730              	.LBE6:
 731              	.LBE7:
 151:drivers/term_io.c **** 		if (d == 'X' || d == 'x') r = 16; // 'x' added by mthomas in increase compatibility
 732              		.loc 1 151 0
 733 00ba 6FF00901 		mvn	r1, #9
 734              	.LVL116:
 735 00be DDE7     		b	.L101
 736              	.LVL117:
 737              	.L79:
 150:drivers/term_io.c **** 		if (d == 'd') r = -10;
 738              		.loc 1 150 0
 739 00c0 0A21     		movs	r1, #10
 740              	.LVL118:
 741 00c2 DBE7     		b	.L101
 742              	.LVL119:
 743              	.L110:
 152:drivers/term_io.c **** 		if (d == 'b') r = 2;
 744              		.loc 1 152 0 discriminator 2
 745 00c4 782C     		cmp	r4, #120
 746 00c6 D8D0     		beq	.L90
 153:drivers/term_io.c **** 		if (!r) break;
 747              		.loc 1 153 0
 748 00c8 622C     		cmp	r4, #98
 749 00ca AAD1     		bne	.L66
 750 00cc 0221     		movs	r1, #2
 751 00ce D5E7     		b	.L101
 752              	.LVL120:
 753              	.L109:
 147:drivers/term_io.c **** 			continue;
 754              		.loc 1 147 0
 755 00d0 019B     		ldr	r3, [sp, #4]
 756              	.LVL121:
 757 00d2 1A1D     		adds	r2, r3, #4
 758 00d4 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 759 00d6 0192     		str	r2, [sp, #4]
 760 00d8 FFF7FEFF 		bl	xputc
 761              	.LVL122:
 148:drivers/term_io.c **** 		}
 762              		.loc 1 148 0
 763 00dc 97E7     		b	.L67
 764              		.cfi_endproc
 765              	.LFE4:
 767 00de 00BF     		.section	.text.put_dump,"ax",%progbits
 768              		.align	2
 769              		.global	put_dump
 770              		.thumb
 771              		.thumb_func
 773              	put_dump:
 774              	.LFB5:
 167:drivers/term_io.c **** 
 168:drivers/term_io.c **** 
 169:drivers/term_io.c **** 
 170:drivers/term_io.c **** 
 171:drivers/term_io.c **** void put_dump (const uint8_t *buff, uint32_t ofs, int cnt)
 172:drivers/term_io.c **** {
 775              		.loc 1 172 0
 776              		.cfi_startproc
 777              		@ args = 0, pretend = 0, frame = 0
 778              		@ frame_needed = 0, uses_anonymous_args = 0
 779              	.LVL123:
 780 0000 70B5     		push	{r4, r5, r6, lr}
 781              	.LCFI23:
 782              		.cfi_def_cfa_offset 16
 783              		.cfi_offset 4, -16
 784              		.cfi_offset 5, -12
 785              		.cfi_offset 6, -8
 786              		.cfi_offset 14, -4
 787              		.loc 1 172 0
 788 0002 1546     		mov	r5, r2
 789 0004 0646     		mov	r6, r0
 173:drivers/term_io.c **** 	uint8_t n;
 174:drivers/term_io.c **** 
 175:drivers/term_io.c **** 
 176:drivers/term_io.c **** 	xprintf("%08lX ", ofs);
 790              		.loc 1 176 0
 791 0006 1848     		ldr	r0, .L125
 792              	.LVL124:
 793 0008 FFF7FEFF 		bl	xprintf
 794              	.LVL125:
 177:drivers/term_io.c **** 	for(n = 0; n < cnt; n++)
 795              		.loc 1 177 0
 796 000c 002D     		cmp	r5, #0
 797 000e 26DD     		ble	.L112
 798 0010 0024     		movs	r4, #0
 799              	.LVL126:
 800              	.L113:
 178:drivers/term_io.c **** 		xprintf(" %02X", buff[n]);
 801              		.loc 1 178 0 discriminator 3
 802 0012 315D     		ldrb	r1, [r6, r4]	@ zero_extendqisi2
 803 0014 1548     		ldr	r0, .L125+4
 177:drivers/term_io.c **** 	for(n = 0; n < cnt; n++)
 804              		.loc 1 177 0 discriminator 3
 805 0016 0134     		adds	r4, r4, #1
 806              	.LVL127:
 807 0018 E4B2     		uxtb	r4, r4
 808              		.loc 1 178 0 discriminator 3
 809 001a FFF7FEFF 		bl	xprintf
 810              	.LVL128:
 177:drivers/term_io.c **** 	for(n = 0; n < cnt; n++)
 811              		.loc 1 177 0 discriminator 3
 812 001e AC42     		cmp	r4, r5
 813 0020 F7DB     		blt	.L113
 814              	.LVL129:
 815              	.LBB12:
 816              	.LBB13:
  65:drivers/term_io.c **** }
 817              		.loc 1 65 0
 818 0022 2020     		movs	r0, #32
 819 0024 FFF7FEFF 		bl	debug_chr
 820              	.LVL130:
 821 0028 0024     		movs	r4, #0
 822 002a 05E0     		b	.L117
 823              	.LVL131:
 824              	.L124:
 825              	.LBE13:
 826              	.LBE12:
 179:drivers/term_io.c **** 	xputc(' ');
 180:drivers/term_io.c **** 	for(n = 0; n < cnt; n++) {
 827              		.loc 1 180 0
 828 002c 0134     		adds	r4, r4, #1
 829              	.LVL132:
 830 002e E4B2     		uxtb	r4, r4
 831              	.LBB15:
 832              	.LBB16:
  65:drivers/term_io.c **** }
 833              		.loc 1 65 0
 834 0030 FFF7FEFF 		bl	debug_chr
 835              	.LVL133:
 836              	.LBE16:
 837              	.LBE15:
 838              		.loc 1 180 0
 839 0034 A542     		cmp	r5, r4
 840 0036 0DDD     		ble	.L118
 841              	.LVL134:
 842              	.L117:
 181:drivers/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 843              		.loc 1 181 0
 844 0038 335D     		ldrb	r3, [r6, r4]	@ zero_extendqisi2
 845 003a A3F12002 		sub	r2, r3, #32
 846 003e 5E2A     		cmp	r2, #94
 847              	.LBB18:
 848              	.LBB17:
  65:drivers/term_io.c **** }
 849              		.loc 1 65 0
 850 0040 4FF02E00 		mov	r0, #46
 851              	.LBE17:
 852              	.LBE18:
 853              		.loc 1 181 0
 854 0044 F2D8     		bhi	.L124
 180:drivers/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 855              		.loc 1 180 0
 856 0046 0134     		adds	r4, r4, #1
 857              	.LVL135:
 182:drivers/term_io.c **** 			xputc('.');
 183:drivers/term_io.c **** 		else
 184:drivers/term_io.c **** 			xputc(buff[n]);
 858              		.loc 1 184 0
 859 0048 1846     		mov	r0, r3
 180:drivers/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 860              		.loc 1 180 0
 861 004a E4B2     		uxtb	r4, r4
 862              		.loc 1 184 0
 863 004c FFF7FEFF 		bl	xputc
 864              	.LVL136:
 180:drivers/term_io.c **** 		if ((buff[n] < 0x20)||(buff[n] >= 0x7F))
 865              		.loc 1 180 0
 866 0050 A542     		cmp	r5, r4
 867 0052 F1DC     		bgt	.L117
 868              	.LVL137:
 869              	.L118:
 185:drivers/term_io.c **** 	}
 186:drivers/term_io.c **** 	xputc('\n');
 870              		.loc 1 186 0
 871 0054 0A20     		movs	r0, #10
 187:drivers/term_io.c **** }
 872              		.loc 1 187 0
 873 0056 BDE87040 		pop	{r4, r5, r6, lr}
 874              	.LCFI24:
 875              		.cfi_remember_state
 876              		.cfi_restore 14
 877              		.cfi_restore 6
 878              		.cfi_restore 5
 879              		.cfi_restore 4
 880              		.cfi_def_cfa_offset 0
 881              	.LVL138:
 186:drivers/term_io.c **** }
 882              		.loc 1 186 0
 883 005a FFF7FEBF 		b	xputc
 884              	.LVL139:
 885              	.L112:
 886              	.LCFI25:
 887              		.cfi_restore_state
 888              	.LBB19:
 889              	.LBB14:
  65:drivers/term_io.c **** }
 890              		.loc 1 65 0
 891 005e 2020     		movs	r0, #32
 892 0060 FFF7FEFF 		bl	debug_chr
 893              	.LVL140:
 894 0064 F6E7     		b	.L118
 895              	.L126:
 896 0066 00BF     		.align	2
 897              	.L125:
 898 0068 00000000 		.word	.LC0
 899 006c 08000000 		.word	.LC1
 900              	.LBE14:
 901              	.LBE19:
 902              		.cfi_endproc
 903              	.LFE5:
 905              		.section	.text.get_line,"ax",%progbits
 906              		.align	2
 907              		.global	get_line
 908              		.thumb
 909              		.thumb_func
 911              	get_line:
 912              	.LFB6:
 188:drivers/term_io.c **** 
 189:drivers/term_io.c **** 
 190:drivers/term_io.c **** 
 191:drivers/term_io.c **** 
 192:drivers/term_io.c **** void get_line (char *buff, int len)
 193:drivers/term_io.c **** {
 913              		.loc 1 193 0
 914              		.cfi_startproc
 915              		@ args = 0, pretend = 0, frame = 0
 916              		@ frame_needed = 0, uses_anonymous_args = 0
 917              	.LVL141:
 918 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 919              	.LCFI26:
 920              		.cfi_def_cfa_offset 24
 921              		.cfi_offset 3, -24
 922              		.cfi_offset 4, -20
 923              		.cfi_offset 5, -16
 924              		.cfi_offset 6, -12
 925              		.cfi_offset 7, -8
 926              		.cfi_offset 14, -4
 927              		.loc 1 193 0
 928 0002 0746     		mov	r7, r0
 194:drivers/term_io.c **** 	char c;
 195:drivers/term_io.c **** 	int idx = 0;
 196:drivers/term_io.c **** 
 197:drivers/term_io.c **** 	for (;;) {
 198:drivers/term_io.c **** 		c = xgetc();
 199:drivers/term_io.c **** 		if (c == '\r') break;
 200:drivers/term_io.c **** 		if ((c == '\b') && idx) {
 201:drivers/term_io.c **** 			idx--; xputc(c);
 202:drivers/term_io.c **** 			xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 203:drivers/term_io.c **** 		}
 204:drivers/term_io.c **** 		if (((uint8_t)c >= ' ') && (idx < len - 1)) {
 929              		.loc 1 204 0
 930 0004 4E1E     		subs	r6, r1, #1
 195:drivers/term_io.c **** 
 931              		.loc 1 195 0
 932 0006 0025     		movs	r5, #0
 933              	.LVL142:
 934              	.L128:
 198:drivers/term_io.c **** 		if (c == '\r') break;
 935              		.loc 1 198 0
 936 0008 FFF7FEFF 		bl	debug_waitkey
 937              	.LVL143:
 199:drivers/term_io.c **** 		if ((c == '\b') && idx) {
 938              		.loc 1 199 0
 939 000c 0D28     		cmp	r0, #13
 198:drivers/term_io.c **** 		if (c == '\r') break;
 940              		.loc 1 198 0
 941 000e 0446     		mov	r4, r0
 942              	.LVL144:
 199:drivers/term_io.c **** 		if ((c == '\b') && idx) {
 943              		.loc 1 199 0
 944 0010 0FD0     		beq	.L129
 945              	.L138:
 200:drivers/term_io.c **** 			idx--; xputc(c);
 946              		.loc 1 200 0
 947 0012 0828     		cmp	r0, #8
 948 0014 14D0     		beq	.L137
 949              		.loc 1 204 0
 950 0016 1F28     		cmp	r0, #31
 951 0018 F6D9     		bls	.L128
 952              		.loc 1 204 0 is_stmt 0 discriminator 1
 953 001a B542     		cmp	r5, r6
 954 001c F4DA     		bge	.L128
 205:drivers/term_io.c **** 				buff[idx++] = c; xputc(c);
 955              		.loc 1 205 0 is_stmt 1
 956 001e 7855     		strb	r0, [r7, r5]
 957 0020 FFF7FEFF 		bl	xputc
 958              	.LVL145:
 198:drivers/term_io.c **** 		if (c == '\r') break;
 959              		.loc 1 198 0
 960 0024 FFF7FEFF 		bl	debug_waitkey
 961              	.LVL146:
 199:drivers/term_io.c **** 		if ((c == '\b') && idx) {
 962              		.loc 1 199 0
 963 0028 0D28     		cmp	r0, #13
 964              		.loc 1 205 0
 965 002a 05F10105 		add	r5, r5, #1
 966              	.LVL147:
 198:drivers/term_io.c **** 		if (c == '\r') break;
 967              		.loc 1 198 0
 968 002e 0446     		mov	r4, r0
 969              	.LVL148:
 199:drivers/term_io.c **** 		if ((c == '\b') && idx) {
 970              		.loc 1 199 0
 971 0030 EFD1     		bne	.L138
 972              	.L129:
 206:drivers/term_io.c **** 		}
 207:drivers/term_io.c **** 	}
 208:drivers/term_io.c **** 	buff[idx] = 0;
 973              		.loc 1 208 0
 974 0032 0023     		movs	r3, #0
 975 0034 7B55     		strb	r3, [r7, r5]
 209:drivers/term_io.c **** 	xputc('\n');
 976              		.loc 1 209 0
 977 0036 0A20     		movs	r0, #10
 978              	.LVL149:
 210:drivers/term_io.c **** }
 979              		.loc 1 210 0
 980 0038 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 981              	.LCFI27:
 982              		.cfi_remember_state
 983              		.cfi_restore 14
 984              		.cfi_restore 7
 985              		.cfi_restore 6
 986              		.cfi_restore 5
 987              		.cfi_restore 4
 988              		.cfi_restore 3
 989              		.cfi_def_cfa_offset 0
 990              	.LVL150:
 209:drivers/term_io.c **** 	xputc('\n');
 991              		.loc 1 209 0
 992 003c FFF7FEBF 		b	xputc
 993              	.LVL151:
 994              	.L137:
 995              	.LCFI28:
 996              		.cfi_restore_state
 200:drivers/term_io.c **** 			idx--; xputc(c);
 997              		.loc 1 200 0 discriminator 1
 998 0040 002D     		cmp	r5, #0
 999 0042 E1D0     		beq	.L128
 201:drivers/term_io.c **** 			xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 1000              		.loc 1 201 0
 1001 0044 FFF7FEFF 		bl	xputc
 1002              	.LVL152:
 1003              	.LBB22:
 1004              	.LBB23:
  65:drivers/term_io.c **** }
 1005              		.loc 1 65 0
 1006 0048 2020     		movs	r0, #32
 1007 004a FFF7FEFF 		bl	debug_chr
 1008              	.LVL153:
 1009              	.LBE23:
 1010              	.LBE22:
 202:drivers/term_io.c **** 		}
 1011              		.loc 1 202 0
 1012 004e 2046     		mov	r0, r4
 201:drivers/term_io.c **** 			xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 1013              		.loc 1 201 0
 1014 0050 013D     		subs	r5, r5, #1
 1015              	.LVL154:
 202:drivers/term_io.c **** 		}
 1016              		.loc 1 202 0
 1017 0052 FFF7FEFF 		bl	xputc
 1018              	.LVL155:
 1019 0056 D7E7     		b	.L128
 1020              		.cfi_endproc
 1021              	.LFE6:
 1023              		.section	.text.get_line_r,"ax",%progbits
 1024              		.align	2
 1025              		.global	get_line_r
 1026              		.thumb
 1027              		.thumb_func
 1029              	get_line_r:
 1030              	.LFB7:
 211:drivers/term_io.c **** 
 212:drivers/term_io.c **** 
 213:drivers/term_io.c **** // function added by mthomas:
 214:drivers/term_io.c **** int get_line_r (char *buff, int len, int* idx)
 215:drivers/term_io.c **** {
 1031              		.loc 1 215 0
 1032              		.cfi_startproc
 1033              		@ args = 0, pretend = 0, frame = 0
 1034              		@ frame_needed = 0, uses_anonymous_args = 0
 1035              	.LVL156:
 1036 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1037              	.LCFI29:
 1038              		.cfi_def_cfa_offset 24
 1039              		.cfi_offset 4, -24
 1040              		.cfi_offset 5, -20
 1041              		.cfi_offset 6, -16
 1042              		.cfi_offset 7, -12
 1043              		.cfi_offset 8, -8
 1044              		.cfi_offset 14, -4
 1045              		.loc 1 215 0
 1046 0004 8046     		mov	r8, r0
 1047 0006 0D46     		mov	r5, r1
 1048 0008 1446     		mov	r4, r2
 216:drivers/term_io.c **** 	char c;
 217:drivers/term_io.c **** 	int retval = 0;
 218:drivers/term_io.c **** 	int myidx;
 219:drivers/term_io.c **** 
 220:drivers/term_io.c **** 	if ( xavail() ) {
 1049              		.loc 1 220 0
 1050 000a FFF7FEFF 		bl	debug_test
 1051              	.LVL157:
 1052 000e 08B9     		cbnz	r0, .L153
 221:drivers/term_io.c **** 		myidx = *idx;
 222:drivers/term_io.c **** 		c = xgetc();
 223:drivers/term_io.c **** 		if (c == '\r') {
 224:drivers/term_io.c **** 			buff[myidx] = 0;
 225:drivers/term_io.c **** 			xputc('\n');
 226:drivers/term_io.c **** 			retval = 1;
 227:drivers/term_io.c **** 		} else {
 228:drivers/term_io.c **** 			if ((c == '\b') && myidx) {
 229:drivers/term_io.c **** 				myidx--; xputc(c);
 230:drivers/term_io.c **** 				xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 231:drivers/term_io.c **** 			}
 232:drivers/term_io.c **** 			if (((uint8_t)c >= ' ') && (myidx < len - 1)) {
 233:drivers/term_io.c **** 					buff[myidx++] = c; xputc(c);
 234:drivers/term_io.c **** 			}
 235:drivers/term_io.c **** 		}
 236:drivers/term_io.c **** 		*idx = myidx;
 237:drivers/term_io.c **** 	}
 238:drivers/term_io.c **** 
 239:drivers/term_io.c **** 	return retval;
 240:drivers/term_io.c **** }
 1053              		.loc 1 240 0
 1054 0010 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1055              	.LVL158:
 1056              	.L153:
 221:drivers/term_io.c **** 		myidx = *idx;
 1057              		.loc 1 221 0
 1058 0014 2768     		ldr	r7, [r4]
 1059              	.LVL159:
 222:drivers/term_io.c **** 		if (c == '\r') {
 1060              		.loc 1 222 0
 1061 0016 FFF7FEFF 		bl	debug_waitkey
 1062              	.LVL160:
 223:drivers/term_io.c **** 			buff[myidx] = 0;
 1063              		.loc 1 223 0
 1064 001a 0D28     		cmp	r0, #13
 222:drivers/term_io.c **** 		if (c == '\r') {
 1065              		.loc 1 222 0
 1066 001c 0646     		mov	r6, r0
 1067              	.LVL161:
 223:drivers/term_io.c **** 			buff[myidx] = 0;
 1068              		.loc 1 223 0
 1069 001e 16D0     		beq	.L154
 228:drivers/term_io.c **** 				myidx--; xputc(c);
 1070              		.loc 1 228 0
 1071 0020 0828     		cmp	r0, #8
 1072 0022 08D0     		beq	.L155
 232:drivers/term_io.c **** 					buff[myidx++] = c; xputc(c);
 1073              		.loc 1 232 0
 1074 0024 1F28     		cmp	r0, #31
 1075 0026 02D9     		bls	.L147
 232:drivers/term_io.c **** 					buff[myidx++] = c; xputc(c);
 1076              		.loc 1 232 0 is_stmt 0 discriminator 1
 1077 0028 013D     		subs	r5, r5, #1
 1078              	.LVL162:
 1079 002a AF42     		cmp	r7, r5
 1080 002c 17DB     		blt	.L156
 1081              	.LVL163:
 1082              	.L147:
 217:drivers/term_io.c **** 	int myidx;
 1083              		.loc 1 217 0 is_stmt 1
 1084 002e 0020     		movs	r0, #0
 1085              	.LVL164:
 1086              	.L142:
 236:drivers/term_io.c **** 	}
 1087              		.loc 1 236 0
 1088 0030 2760     		str	r7, [r4]
 1089 0032 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1090              	.LVL165:
 1091              	.L155:
 228:drivers/term_io.c **** 				myidx--; xputc(c);
 1092              		.loc 1 228 0 discriminator 1
 1093 0036 002F     		cmp	r7, #0
 1094 0038 F9D0     		beq	.L147
 229:drivers/term_io.c **** 				xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 1095              		.loc 1 229 0
 1096 003a FFF7FEFF 		bl	xputc
 1097              	.LVL166:
 1098              	.LBB26:
 1099              	.LBB27:
  65:drivers/term_io.c **** }
 1100              		.loc 1 65 0
 1101 003e 2020     		movs	r0, #32
 1102 0040 FFF7FEFF 		bl	debug_chr
 1103              	.LVL167:
 1104              	.LBE27:
 1105              	.LBE26:
 230:drivers/term_io.c **** 			}
 1106              		.loc 1 230 0
 1107 0044 3046     		mov	r0, r6
 229:drivers/term_io.c **** 				xputc(' '); xputc(c); // added by mthomas for Eclipse Terminal plug-in
 1108              		.loc 1 229 0
 1109 0046 013F     		subs	r7, r7, #1
 1110              	.LVL168:
 230:drivers/term_io.c **** 			}
 1111              		.loc 1 230 0
 1112 0048 FFF7FEFF 		bl	xputc
 1113              	.LVL169:
 1114 004c EFE7     		b	.L147
 1115              	.LVL170:
 1116              	.L154:
 224:drivers/term_io.c **** 			xputc('\n');
 1117              		.loc 1 224 0
 1118 004e 0023     		movs	r3, #0
 225:drivers/term_io.c **** 			retval = 1;
 1119              		.loc 1 225 0
 1120 0050 0A20     		movs	r0, #10
 1121              	.LVL171:
 224:drivers/term_io.c **** 			xputc('\n');
 1122              		.loc 1 224 0
 1123 0052 08F80730 		strb	r3, [r8, r7]
 225:drivers/term_io.c **** 			retval = 1;
 1124              		.loc 1 225 0
 1125 0056 FFF7FEFF 		bl	xputc
 1126              	.LVL172:
 226:drivers/term_io.c **** 		} else {
 1127              		.loc 1 226 0
 1128 005a 0120     		movs	r0, #1
 1129 005c E8E7     		b	.L142
 1130              	.LVL173:
 1131              	.L156:
 233:drivers/term_io.c **** 			}
 1132              		.loc 1 233 0
 1133 005e 08F80700 		strb	r0, [r8, r7]
 1134 0062 FFF7FEFF 		bl	xputc
 1135              	.LVL174:
 1136 0066 0137     		adds	r7, r7, #1
 1137              	.LVL175:
 217:drivers/term_io.c **** 	int myidx;
 1138              		.loc 1 217 0
 1139 0068 0020     		movs	r0, #0
 1140 006a E1E7     		b	.L142
 1141              		.cfi_endproc
 1142              	.LFE7:
 1144              		.section	.rodata.str1.4,"aMS",%progbits,1
 1145              		.align	2
 1146              	.LC0:
 1147 0000 2530386C 		.ascii	"%08lX \000"
 1147      582000
 1148 0007 00       		.space	1
 1149              	.LC1:
 1150 0008 20253032 		.ascii	" %02X\000"
 1150      5800
 1151 000e 0000     		.text
 1152              	.Letext0:
 1153              		.file 2 "c:\\program files (x86)\\gnu tools arm embedded\\4.9 2014q4\\lib\\gcc\\arm-none-eabi\\4.9
 1154              		.file 3 "c:\\program files (x86)\\gnu tools arm embedded\\4.9 2014q4\\arm-none-eabi\\include\\mach
 1155              		.file 4 "c:\\program files (x86)\\gnu tools arm embedded\\4.9 2014q4\\arm-none-eabi\\include\\stdi
 1156              		.file 5 "drivers/dbgu.h"
 1157              		.file 6 "<built-in>"
DEFINED SYMBOLS
                            *ABS*:00000000 term_io.c
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:20     .text.xatoi:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:25     .text.xatoi:00000000 xatoi
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:255    .text.xputc:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:260    .text.xputc:00000000 xputc
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:315    .text.xputs:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:320    .text.xputs:00000000 xputs
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:355    .text.xitoa:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:360    .text.xitoa:00000000 xitoa
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:520    .text.xprintf:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:525    .text.xprintf:00000000 xprintf
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:768    .text.put_dump:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:773    .text.put_dump:00000000 put_dump
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:898    .text.put_dump:00000068 $d
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:906    .text.get_line:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:911    .text.get_line:00000000 get_line
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:1024   .text.get_line_r:00000000 $t
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:1029   .text.get_line_r:00000000 get_line_r
C:\Users\Student\AppData\Local\Temp\cc165TbP.s:1145   .rodata.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
debug_chr
debug_waitkey
debug_test
